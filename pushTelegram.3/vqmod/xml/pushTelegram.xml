<?xml version="1.0" encoding="utf-8"?>
<modification>
    <code>PushTelegram</code>
    <name>PushTelegram</name>
    <version>3.0</version>
    <author>Basheir</author>
    <link>http://4techs.net</link>
    <file path="catalog/model/checkout/order.php">
        <operation>
            <search><![CDATA[
            $order_info = $this->getOrder($order_id);
            ]]></search>
            <add position="after"><![CDATA[
       //Create push notifications


       $order_products = $this->getOrderProducts($order_id);

       foreach($order_products as $product) {
        $productListingForPush[] = $product;
      }
      $this->load->model('extension/module/pushtelegram');
      $sendData['firstname'] = $order_info['shipping_firstname'];
      $sendData['lastname'] = $order_info['shipping_lastname'];
      //$sendData['status'] = $order_info['order_status'];
      $sendData['products'] = $productListingForPush;
      $sendData['total'] = $order_info['total'];
      $this->model_extension_module_pushtelegram->sendOrderAlert($sendData);
            ]]></add>
        </operation>
    </file>
<file path="catalog/model/account/customer.php">
        <operation>
            <search><![CDATA[
              $this->load->model('account/customer_group');
            ]]></search>
            <add position="after"><![CDATA[
            $this->load->model('extension/module/pushtelegram');
      $sendData['firstname'] = $data['firstname'];
      $sendData['lastname'] = $data['lastname'];
      $this->model_extension_module_pushtelegram->sendAccountAlert($sendData);
            ]]></add>
        </operation>
    </file>
</modification>
